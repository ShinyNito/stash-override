# modify from https://raw.githubusercontent.com/app2smile/rules/master/module/bilibili-test.sgmodule
name: bilibili-test(iOS15)
desc: 开屏页广告,推荐页广告,动态(推荐话题和列表广告),视频播放页面(up主推荐广告,相关推荐广告)

http:
  mitm:
    - app.bilibili.com
    - grpc.biliapi.net
  script:
    - match: ^https:\/\/app\.bilibili\.com\/x\/(v2\/(splash\/(list|show)|feed\/index\?)|resource\/show\/tab\/v2)
      name: bilibili-json
      type: response
      require-body: true
      timeout: 20
    - match: ^https:\/\/app\.bilibili\.com\/bilibili\.app\.(view\.v1\.View\/View|dynamic\.v2\.Dynamic\/DynAll)$
      name: bilibili-proto-test
      type: response
      require-body: true
      timeout: 20
script-providers:
  bilibili-json:
    url: https://raw.githubusercontent.com/app2smile/rules/master/js/bilibili-json.js
    interval: 86400
  bilibili-proto-test:
    url: https://raw.githubusercontent.com/app2smile/rules/master/js/bilibili-proto-test.js
    interval: 86400
